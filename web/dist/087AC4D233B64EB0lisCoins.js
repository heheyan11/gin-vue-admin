/*! 
 Build based on gin-vue-admin 
 Time : 1698981314000 */
import{a as e,r as a,S as l,o as t,c as r,b as i,d as s,w as o,g as u,q as d,t as n,G as p,k as m,J as c,E as v,l as g}from"./087AC4D233B64EB0index.js";import{E as C,a as f,b as B}from"./087AC4D233B64EB0date-picker.js";import{E as b}from"./087AC4D233B64EB0dialog.js";import"./087AC4D233B64EB0overlay.js";import{E as A}from"./087AC4D233B64EB0scrollbar.js";/* empty css                     */import{E as h}from"./087AC4D233B64EB0pagination.js";import"./087AC4D233B64EB0tag.js";import"./087AC4D233B64EB0select.js";/* empty css                      */import{E as y,a as E}from"./087AC4D233B64EB0table-column.js";import"./087AC4D233B64EB0checkbox.js";/* empty css                       */import{E as D}from"./087AC4D233B64EB0popover.js";import{a as _,E as j}from"./087AC4D233B64EB0form-item.js";/* empty css                      *//* empty css                     */import{g as w,d as k,f as V,c as x,u as z}from"./087AC4D233B64EB0lisCoins2.js";import{f as T}from"./087AC4D233B64EB0format.js";import{E as U}from"./087AC4D233B64EB0index21.js";import"./087AC4D233B64EB0arrays.js";import"./087AC4D233B64EB0index26.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0hasIn.js";import"./087AC4D233B64EB0index22.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0_initCloneObject.js";import"./087AC4D233B64EB0dropdown.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0_baseClone.js";import"./087AC4D233B64EB0date.js";import"./087AC4D233B64EB0dictionary.js";import"./087AC4D233B64EB0sysDictionary2.js";const I={class:"gva-search-box"},S={class:"gva-table-box"},q={class:"gva-btn-list"},F=i("p",null,"确定要删除吗？",-1),K={style:{"text-align":"right","margin-top":"8px"}},O={class:"gva-pagination"},R={class:"dialog-footer"},G=Object.assign({name:"Coins"},{__name:"lisCoins",setup(G){const J=e({name:"",zhang:"",decimal:""}),Q=a({name:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],zhang:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],decimal:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}]}),H=a({createdAt:[{validator:(e,a,l)=>{Y.value.startCreatedAt&&!Y.value.endCreatedAt?l(new Error("请填写结束日期")):!Y.value.startCreatedAt&&Y.value.endCreatedAt?l(new Error("请填写开始日期")):Y.value.startCreatedAt&&Y.value.endCreatedAt&&(Y.value.startCreatedAt.getTime()===Y.value.endCreatedAt.getTime()||Y.value.startCreatedAt.getTime()>Y.value.endCreatedAt.getTime())?l(new Error("开始日期应当早于结束日期")):l()},trigger:"change"}]}),L=e(),M=e(),N=e(1),P=e(0),W=e(10),X=e([]),Y=e({}),Z=()=>{Y.value={},le()},$=()=>{var e;null==(e=M.value)||e.validate((async e=>{e&&(N.value=1,W.value=10,le())}))},ee=e=>{W.value=e,le()},ae=e=>{N.value=e,le()},le=async()=>{const e=await w({page:N.value,pageSize:W.value,...Y.value});0===e.code&&(X.value=e.data.list,P.value=e.data.total,N.value=e.data.page,W.value=e.data.pageSize)};le();(async()=>{})();const te=e([]),re=e=>{te.value=e},ie=e(!1),se=async()=>{const e=[];if(0===te.value.length)return void m({type:"warning",message:"请选择要删除的数据"});te.value&&te.value.map((a=>{e.push(a.ID)}));0===(await k({ids:e})).code&&(m({type:"success",message:"删除成功"}),X.value.length===e.length&&N.value>1&&N.value--,ie.value=!1,le())},oe=e(""),ue=e(!1),de=e(!1),ne=async e=>{const a=await V({ID:e.ID});0===a.code&&(J.value=a.data.relisCoins,de.value=!0)},pe=()=>{de.value=!1,J.value={name:"",zhang:"",decimal:""}},me=()=>{oe.value="create",ue.value=!0},ce=()=>{ue.value=!1,J.value={name:"",zhang:"",decimal:""}},ve=async()=>{var e;null==(e=L.value)||e.validate((async e=>{if(!e)return;let a;switch(oe.value){case"create":default:a=await x(J.value);break;case"update":a=await z(J.value)}0===a.code&&(m({type:"success",message:"创建/更改成功"}),ce(),le())}))};return(e,a)=>{const m=l("QuestionFilled"),w=c,k=U,x=C,z=_,G=v,le=j,ge=D,Ce=y,fe=l("InfoFilled"),Be=E,be=h,Ae=g,he=A,ye=b,Ee=f,De=B;return t(),r("div",null,[i("div",I,[s(le,{ref_key:"elSearchFormRef",ref:M,inline:!0,model:Y.value,class:"demo-form-inline",rules:H,onKeyup:d($,["enter"])},{default:o((()=>[s(z,{label:"创建日期",prop:"createdAt"},{label:o((()=>[i("span",null,[u(" 创建日期 "),s(k,{content:"搜索范围是开始日期（包含）至结束日期（不包含）"},{default:o((()=>[s(w,null,{default:o((()=>[s(m)])),_:1})])),_:1})])])),default:o((()=>[s(x,{modelValue:Y.value.startCreatedAt,"onUpdate:modelValue":a[0]||(a[0]=e=>Y.value.startCreatedAt=e),type:"datetime",placeholder:"开始日期","disabled-date":e=>!!Y.value.endCreatedAt&&e.getTime()>Y.value.endCreatedAt.getTime()},null,8,["modelValue","disabled-date"]),u(" — "),s(x,{modelValue:Y.value.endCreatedAt,"onUpdate:modelValue":a[1]||(a[1]=e=>Y.value.endCreatedAt=e),type:"datetime",placeholder:"结束日期","disabled-date":e=>!!Y.value.startCreatedAt&&e.getTime()<Y.value.startCreatedAt.getTime()},null,8,["modelValue","disabled-date"])])),_:1}),s(z,null,{default:o((()=>[s(G,{type:"primary",icon:"search",onClick:$},{default:o((()=>[u("查询")])),_:1}),s(G,{icon:"refresh",onClick:Z},{default:o((()=>[u("重置")])),_:1})])),_:1})])),_:1},8,["model","rules","onKeyup"])]),i("div",S,[i("div",q,[s(G,{type:"primary",icon:"plus",onClick:me},{default:o((()=>[u("新增")])),_:1}),s(ge,{visible:ie.value,"onUpdate:visible":a[4]||(a[4]=e=>ie.value=e),disabled:!te.value.length,placement:"top",width:"160"},{reference:o((()=>[s(G,{icon:"delete",style:{"margin-left":"10px"},disabled:!te.value.length,onClick:a[3]||(a[3]=e=>ie.value=!0)},{default:o((()=>[u("删除")])),_:1},8,["disabled"])])),default:o((()=>[F,i("div",K,[s(G,{type:"primary",link:"",onClick:a[2]||(a[2]=e=>ie.value=!1)},{default:o((()=>[u("取消")])),_:1}),s(G,{type:"primary",onClick:se},{default:o((()=>[u("确定")])),_:1})])])),_:1},8,["visible","disabled"])]),s(Be,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:X.value,"row-key":"ID",onSelectionChange:re},{default:o((()=>[s(Ce,{type:"selection",width:"55"}),s(Ce,{align:"left",label:"日期",width:"180"},{default:o((e=>[u(n(p(T)(e.row.CreatedAt)),1)])),_:1}),s(Ce,{align:"left",label:"名称",prop:"name",width:"120"}),s(Ce,{align:"left",label:"每张价值",prop:"zhang",width:"120"}),s(Ce,{align:"left",label:"精度",prop:"decimal",width:"120"}),s(Ce,{align:"left",label:"操作"},{default:o((e=>[s(G,{type:"primary",link:"",class:"table-button",onClick:a=>ne(e.row)},{default:o((()=>[s(w,{style:{"margin-right":"5px"}},{default:o((()=>[s(fe)])),_:1}),u(" 查看详情 ")])),_:2},1032,["onClick"]),s(G,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:a=>(async e=>{const a=await V({ID:e.ID});oe.value="update",0===a.code&&(J.value=a.data.relisCoins,ue.value=!0)})(e.row)},{default:o((()=>[u("变更")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),i("div",O,[s(be,{layout:"total, sizes, prev, pager, next, jumper","current-page":N.value,"page-size":W.value,"page-sizes":[10,30,50,100],total:P.value,onCurrentChange:ae,onSizeChange:ee},null,8,["current-page","page-size","total"])])]),s(ye,{modelValue:ue.value,"onUpdate:modelValue":a[8]||(a[8]=e=>ue.value=e),"before-close":ce,title:"create"===oe.value?"添加":"修改","destroy-on-close":""},{footer:o((()=>[i("div",R,[s(G,{onClick:ce},{default:o((()=>[u("取 消")])),_:1}),s(G,{type:"primary",onClick:ve},{default:o((()=>[u("确 定")])),_:1})])])),default:o((()=>[s(he,{height:"500px"},{default:o((()=>[s(le,{model:J.value,"label-position":"right",ref_key:"elFormRef",ref:L,rules:Q,"label-width":"130px"},{default:o((()=>[s(z,{label:"名称:",prop:"name"},{default:o((()=>[s(Ae,{modelValue:J.value.name,"onUpdate:modelValue":a[5]||(a[5]=e=>J.value.name=e),clearable:!0,placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),s(z,{label:"每张价值:",prop:"zhang"},{default:o((()=>[s(Ae,{modelValue:J.value.zhang,"onUpdate:modelValue":a[6]||(a[6]=e=>J.value.zhang=e),clearable:!0,placeholder:"请输入每张价值"},null,8,["modelValue"])])),_:1}),s(z,{label:"精度:",prop:"decimal"},{default:o((()=>[s(Ae,{modelValue:J.value.decimal,"onUpdate:modelValue":a[7]||(a[7]=e=>J.value.decimal=e),clearable:!0,placeholder:"请输入精度"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1},8,["modelValue","title"]),s(ye,{modelValue:de.value,"onUpdate:modelValue":a[9]||(a[9]=e=>de.value=e),style:{width:"800px"},"lock-scroll":"","before-close":pe,title:"查看详情","destroy-on-close":""},{default:o((()=>[s(he,{height:"550px"},{default:o((()=>[s(De,{column:"1",border:""},{default:o((()=>[s(Ee,{label:"名称"},{default:o((()=>[u(n(J.value.name),1)])),_:1}),s(Ee,{label:"每张价值"},{default:o((()=>[u(n(J.value.zhang),1)])),_:1}),s(Ee,{label:"精度"},{default:o((()=>[u(n(J.value.decimal),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}});export{G as default};
