/*! 
 Build based on gin-vue-admin 
 Time : 1699796219000 */
import{a as e,r as l,P as a,o as t,c as s,b as r,d as i,w as u,g as o,q as d,t as n,G as p,h as m,e as c,M as v,N as b,a1 as y,k as g,l as f,J as C,E as B}from"./087AC4D233B64EB0index.js";import"./087AC4D233B64EB0tag.js";import{E as h}from"./087AC4D233B64EB0empty.js";import{E as A,a as _,b as E}from"./087AC4D233B64EB0date-picker.js";import{E as D}from"./087AC4D233B64EB0dialog.js";import"./087AC4D233B64EB0overlay.js";import{E as j}from"./087AC4D233B64EB0scrollbar.js";import{E as w,a as k}from"./087AC4D233B64EB0radio.js";/* empty css                              */import{E as K,a as V}from"./087AC4D233B64EB0checkbox.js";import{E as S}from"./087AC4D233B64EB0pagination.js";/* empty css                     */import"./087AC4D233B64EB0select.js";/* empty css                      */import{E as x,a as z}from"./087AC4D233B64EB0table-column.js";/* empty css                       */import{E as I}from"./087AC4D233B64EB0popover.js";import{a as U,E as T}from"./087AC4D233B64EB0form-item.js";/* empty css                      *//* empty css                     */import{g as F,d as O,f as P,a as q,b as Q,c as J,u as M}from"./087AC4D233B64EB0lisApis2.js";import{g as N}from"./087AC4D233B64EB0lisCoins2.js";import{f as R}from"./087AC4D233B64EB0format.js";import{E as G}from"./087AC4D233B64EB0index21.js";import{E as H}from"./087AC4D233B64EB0index22.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0hasIn.js";import"./087AC4D233B64EB0arrays.js";import"./087AC4D233B64EB0index26.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0_initCloneObject.js";import"./087AC4D233B64EB0dropdown.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0_baseClone.js";import"./087AC4D233B64EB0date.js";import"./087AC4D233B64EB0dictionary.js";import"./087AC4D233B64EB0sysDictionary2.js";const L={class:"gva-search-box"},W={class:"gva-table-box"},X={class:"gva-btn-list"},Y=r("p",null,"确定要删除吗？",-1),Z={style:{"text-align":"right","margin-top":"8px"}},$={class:"gva-pagination"},ee={class:"dialog-footer"},le={class:"dialog-footer"},ae=r("br",null,null,-1),te=r("br",null,null,-1),se=r("br",null,null,-1),re=r("br",null,null,-1),ie=r("br",null,null,-1),ue=r("br",null,null,-1),oe=r("br",null,null,-1),de=r("br",null,null,-1),ne=r("br",null,null,-1),pe=r("br",null,null,-1),me=Object.assign({name:"Apis"},{__name:"lisApis",setup(me){const ce=e({apiKey:"",passphrase:"",secretKey:"",status:"启动",symbol:[]}),ve=e({apiKey:[{required:!0,message:"请输入apikey",trigger:["input","blur"]}],passphrase:[{required:!0,message:"请输入passphrase",trigger:["input","blur"]}],secretKey:[{required:!0,message:"请输入secretKey",trigger:["input","blur"]}],status:[{required:!0,message:"请选择启动或停止",trigger:["select","blur"]}],symbol:[{required:!0,message:"请选择symbol",trigger:["select","blur"]}]}),be=l({createdAt:[{validator:(e,l,a)=>{Ae.value.startCreatedAt&&!Ae.value.endCreatedAt?a(new Error("请填写结束日期")):!Ae.value.startCreatedAt&&Ae.value.endCreatedAt?a(new Error("请填写开始日期")):Ae.value.startCreatedAt&&Ae.value.endCreatedAt&&(Ae.value.startCreatedAt.getTime()===Ae.value.endCreatedAt.getTime()||Ae.value.startCreatedAt.getTime()>Ae.value.endCreatedAt.getTime())?a(new Error("开始日期应当早于结束日期")):a()},trigger:"change"}]}),ye=e(),ge=e(),fe=e(1),Ce=e(0),Be=e(5),he=e([]),Ae=e({}),_e=e([]),Ee=()=>{Ae.value={},ke()},De=()=>{var e;null==(e=ge.value)||e.validate((async e=>{e&&(fe.value=1,Be.value=10,ke())}))},je=e=>{Be.value=e,ke()},we=e=>{fe.value=e,ke()},ke=async()=>{const e=await F({page:fe.value,pageSize:Be.value,...Ae.value});0===e.code&&(he.value=e.data.list,Ce.value=e.data.total,fe.value=e.data.page,Be.value=e.data.pageSize)};ke();(async()=>{})();const Ke=e([]),Ve=e=>{Ke.value=e},Se=e(!1),xe=async()=>{const e=[];if(0===Ke.value.length)return void g({type:"warning",message:"请选择要删除的数据"});Ke.value&&Ke.value.map((l=>{e.push(l.ID)}));0===(await O({ids:e})).code&&(g({type:"success",message:"删除成功"}),he.value.length===e.length&&fe.value>1&&fe.value--,Se.value=!1,ke())},ze=e(""),Ie=async e=>{0===(await q({ID:e.ID})).code&&(g({type:"success",message:"删除成功"}),1===he.value.length&&fe.value>1&&fe.value--,ke())},Ue=e(!1),Te=e(!1),Fe=e(!1),Oe=async e=>{const l=await P({ID:e.ID});0===l.code&&(ce.value=l.data.relisApis,Te.value=!0)},Pe=async e=>{const l=await Q({apiKey:e.apiKey});0===l.code&&(Qe.value=l.data,Fe.value=!0)},qe=()=>{Te.value=!1,ce.value={apiKey:"",passphrase:"",secretKey:"",status:"启动",symbol:[]}},Qe=e({Childs:{},apiKey:""}),Je=()=>{Fe.value=!1,Qe.value={Childs:{},apiKey:""}},Me=async()=>{let e=await N(),l=[];for(let a=0;a<e.data.list.length;a++){let t=e.data.list[a].name.split("-");l[a]={label:t[0],value:e.data.list[a].name}}_e.value=l},Ne=()=>{Me(),ze.value="create",Ue.value=!0},Re=()=>{Ue.value=!1,ce.value={apiKey:"",passphrase:"",secretKey:"",status:"启动",symbol:[]}},Ge=async()=>{var e;null==(e=ye.value)||e.validate((async e=>{if(!e)return;let l;switch(ze.value){case"create":default:l=await J(ce.value);break;case"update":l=await M(ce.value)}0===l.code?(g({type:"success",message:"创建/更改成功"}),Re(),ke()):y({title:"提示",message:l.msg,confirmButtonText:"确定",showCancelButton:!1,closeOnClickModal:!1,type:"warning"})}))};return(e,l)=>{const g=f,F=U,O=a("QuestionFilled"),q=C,J=G,M=A,N=B,me=T,ke=I,He=x,Le=a("InfoFilled"),We=z,Xe=S,Ye=K,Ze=V,$e=w,el=k,ll=j,al=D,tl=_,sl=E,rl=h,il=H;return t(),s("div",null,[r("div",L,[i(me,{ref_key:"elSearchFormRef",ref:ge,inline:!0,model:Ae.value,class:"demo-form-inline",rules:be,onKeyup:d(De,["enter"])},{default:u((()=>[i(F,{label:"apiKey"},{default:u((()=>[i(g,{modelValue:Ae.value.apiKey,"onUpdate:modelValue":l[0]||(l[0]=e=>Ae.value.apiKey=e),placeholder:"API Key"},null,8,["modelValue"])])),_:1}),i(F,{label:"创建日期",prop:"createdAt"},{label:u((()=>[r("span",null,[o(" 创建日期 "),i(J,{content:"搜索范围是开始日期（包含）至结束日期（不包含）"},{default:u((()=>[i(q,null,{default:u((()=>[i(O)])),_:1})])),_:1})])])),default:u((()=>[i(M,{modelValue:Ae.value.startCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>Ae.value.startCreatedAt=e),type:"datetime",placeholder:"开始日期","disabled-date":e=>!!Ae.value.endCreatedAt&&e.getTime()>Ae.value.endCreatedAt.getTime()},null,8,["modelValue","disabled-date"]),o(" — "),i(M,{modelValue:Ae.value.endCreatedAt,"onUpdate:modelValue":l[2]||(l[2]=e=>Ae.value.endCreatedAt=e),type:"datetime",placeholder:"结束日期","disabled-date":e=>!!Ae.value.startCreatedAt&&e.getTime()<Ae.value.startCreatedAt.getTime()},null,8,["modelValue","disabled-date"])])),_:1}),i(F,null,{default:u((()=>[i(N,{type:"primary",icon:"search",onClick:De},{default:u((()=>[o("查询")])),_:1}),i(N,{icon:"refresh",onClick:Ee},{default:u((()=>[o("重置")])),_:1})])),_:1})])),_:1},8,["model","rules","onKeyup"])]),r("div",W,[r("div",X,[i(N,{type:"primary",icon:"plus",onClick:Ne},{default:u((()=>[o("新增")])),_:1}),i(ke,{visible:Se.value,"onUpdate:visible":l[4]||(l[4]=e=>Se.value=e),disabled:!Ke.value.length,placement:"top",width:"160"},{default:u((()=>[Y,r("div",Z,[i(N,{type:"primary",link:"",onClick:l[3]||(l[3]=e=>Se.value=!1)},{default:u((()=>[o("取消")])),_:1}),i(N,{type:"primary",onClick:xe},{default:u((()=>[o("确定")])),_:1})])])),_:1},8,["visible","disabled"])]),i(We,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:he.value,"row-key":"ID",onSelectionChange:Ve},{default:u((()=>[i(He,{align:"left",label:"日期",width:"180"},{default:u((e=>[o(n(p(R)(e.row.CreatedAt)),1)])),_:1}),i(He,{align:"left",label:"ApiKey",prop:"apiKey",width:"285"}),i(He,{align:"left",label:"正收益",prop:"zheng",width:"120"}),i(He,{align:"left",label:"负收益",prop:"fu",width:"120"}),i(He,{align:"left",label:"总收益",prop:"zong",width:"120"}),i(He,{align:"left",label:"是否启动",prop:"status",width:"220"}),i(He,{align:"left",label:"操作"},{default:u((e=>[i(N,{type:"primary",link:"",class:"table-button",onClick:l=>Pe(e.row)},{default:u((()=>[i(q,{style:{"margin-right":"5px"}},{default:u((()=>[i(Le)])),_:1}),o(" 查看状态 ")])),_:2},1032,["onClick"]),i(N,{type:"primary",link:"",class:"table-button",onClick:l=>Oe(e.row)},{default:u((()=>[i(q,{style:{"margin-right":"5px"}},{default:u((()=>[i(Le)])),_:1}),o(" 查看详情 ")])),_:2},1032,["onClick"]),i(N,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:l=>(async e=>{const l=await P({ID:e.ID});Me(),l.data.relisApis.symbol=JSON.parse(l.data.relisApis.symbol),ze.value="update",0===l.code&&(ce.value=l.data.relisApis,Ue.value=!0)})(e.row)},{default:u((()=>[o("启动/停止")])),_:2},1032,["onClick"]),i(N,{type:"primary",link:"",icon:"delete",onClick:l=>{return a=e.row,void y.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{Ie(a)}));var a}},{default:u((()=>[o("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),r("div",$,[i(Xe,{layout:"total, sizes, prev, pager, next, jumper","current-page":fe.value,"page-size":Be.value,"page-sizes":[5,30,50,100],total:Ce.value,onCurrentChange:we,onSizeChange:je},null,8,["current-page","page-size","total"])])]),i(al,{modelValue:Ue.value,"onUpdate:modelValue":l[10]||(l[10]=e=>Ue.value=e),"before-close":Re,title:"create"===ze.value?"添加":"启动/停止","destroy-on-close":""},{footer:u((()=>[r("div",ee,[i(N,{onClick:Re},{default:u((()=>[o("取 消")])),_:1}),i(N,{type:"primary",onClick:Ge},{default:u((()=>[o("确 定")])),_:1})])])),default:u((()=>[i(ll,{height:"500px"},{default:u((()=>[i(me,{model:ce.value,"label-position":"right",ref_key:"elFormRef",ref:ye,rules:ve.value,"label-width":"130px"},{default:u((()=>[i(F,{label:"API Key:",prop:"apiKey"},{default:u((()=>[i(g,{modelValue:ce.value.apiKey,"onUpdate:modelValue":l[5]||(l[5]=e=>ce.value.apiKey=e),clearable:!0,placeholder:"请输入API Key1",readonly:"create"!=ze.value&&"readonly"},null,8,["modelValue","readonly"])])),_:1}),"create"==ze.value?(t(),m(F,{key:0,label:"passphrase:",prop:"passphrase"},{default:u((()=>[i(g,{modelValue:ce.value.passphrase,"onUpdate:modelValue":l[6]||(l[6]=e=>ce.value.passphrase=e),clearable:!0,placeholder:"请输入passphrase密码"},null,8,["modelValue"])])),_:1})):c("",!0),"create"==ze.value?(t(),m(F,{key:1,label:"SecretKey:",prop:"secretKey"},{default:u((()=>[i(g,{modelValue:ce.value.secretKey,"onUpdate:modelValue":l[7]||(l[7]=e=>ce.value.secretKey=e),clearable:!0,placeholder:"请输入SecretKey"},null,8,["modelValue"])])),_:1})):c("",!0),i(F,{label:"symbol选择",prop:"symbol"},{default:u((()=>[i(Ze,{modelValue:ce.value.symbol,"onUpdate:modelValue":l[8]||(l[8]=e=>ce.value.symbol=e),clearable:!0},{default:u((()=>[(t(!0),s(v,null,b(_e.value,((e,l)=>(t(),m(Ye,{key:l,label:e.value,disabled:e.disabled,style:{"{display":"inline}"}},{default:u((()=>[o(n(e.label),1)])),_:2},1032,["label","disabled"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(F,{label:"设置运行状态",prop:"启动停止"},{default:u((()=>[i(el,{modelValue:ce.value.status,"onUpdate:modelValue":l[9]||(l[9]=e=>ce.value.status=e)},{default:u((()=>[(t(),s(v,null,b(["停止","启动"],(e=>i($e,{key:e,label:e,clearable:!1,style:{"{display":"inline}"}},{default:u((()=>[o(n(e),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1},8,["modelValue","title"]),i(al,{modelValue:Te.value,"onUpdate:modelValue":l[11]||(l[11]=e=>Te.value=e),style:{width:"1200px"},"lock-scroll":"","before-close":qe,title:"查看详情","destroy-on-close":""},{default:u((()=>[i(ll,{height:"550px"},{default:u((()=>[i(sl,{column:"1",border:""},{default:u((()=>[i(tl,{label:"ApiKey"},{default:u((()=>[o(n(ce.value.apiKey),1)])),_:1}),i(tl,{label:"passphrase"},{default:u((()=>[o(n(ce.value.passphrase),1)])),_:1}),i(tl,{label:"symbol"},{default:u((()=>[o(n(ce.value.symbol),1)])),_:1}),i(tl,{label:"是否启动"},{default:u((()=>[o(n(ce.value.status),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),i(al,{modelValue:Fe.value,"onUpdate:modelValue":l[13]||(l[13]=e=>Fe.value=e),style:{width:"1600px"},"lock-scroll":"","before-close":Je,title:"查看状态","destroy-on-close":""},{default:u((()=>[i(ll,{height:"650px"},{default:u((()=>[r("div",le,[i(N,{type:"primary",onClick:l[12]||(l[12]=e=>(async e=>{console.log(e);const l=await Q({apiKey:e});0===l.code&&(Qe.value=l.data)})(Qe.value.apiKey))},{default:u((()=>[o("刷 新")])),_:1})]),""==Qe.value.apiKey?(t(),m(rl,{key:0,description:"暂无数据"})):c("",!0),(t(!0),s(v,null,b(Qe.value.Childs,((e,l,a)=>(t(),m(sl,{column:"2",border:""},{default:u((()=>[i(tl,{label:"symbol名称","label-align":"center"},{default:u((()=>[o(n(l),1)])),_:2},1024),i(tl,{label:"状态","label-align":"right"},{default:u((()=>[o(n(1==e.Status?"比价":"做单"),1)])),_:2},1024),i(tl,{label:"现货触发止盈价","label-align":"right"},{default:u((()=>[o(n(e.SpotSell),1)])),_:2},1024),i(tl,{label:"现货买单均价","label-align":"right"},{default:u((()=>[o(n(e.SpotAvgPx),1)])),_:2},1024),i(tl,{label:"现货成交数量","label-align":"right"},{default:u((()=>[o(n(e.SpotFillSz),1)])),_:2},1024),i(tl,{label:"现货订单号","label-align":"right"},{default:u((()=>[o(n(e.SpotOid),1)])),_:2},1024),i(tl,{label:"合约触发止盈价","label-align":"right"},{default:u((()=>[o(n(e.SwapSell),1)])),_:2},1024),i(tl,{label:"合约买单均价","label-align":"right"},{default:u((()=>[o(n(e.SwapAvgPx),1)])),_:2},1024),i(tl,{label:"合约成交数量","label-align":"right"},{default:u((()=>[o(n(e.SwapFillSz),1)])),_:2},1024),i(tl,{label:"合约订单号","label-align":"right"},{default:u((()=>[o(n(e.SwapOid),1)])),_:2},1024),(t(!0),s(v,null,b(e.SpotQueue,((e,l,a)=>(t(),m(tl,{label:"现货止盈队列","label-align":"right",span:"2"},{default:u((()=>[i(il,null,{default:u((()=>[o(" 订单号："+n(e.Oid),1),ae,o(" 成交触发价："+n(e.BackPx),1),te,o(" 成交量："+n(e.FillSz),1),se,o(" 止盈触发价："+n(e.Sell),1),re])),_:2},1024),ie])),_:2},1024)))),256)),(t(!0),s(v,null,b(e.SwapQueue,((e,l,a)=>(t(),m(tl,{label:"合约止盈队列","label-align":"right",span:"2"},{default:u((()=>[i(il,null,{default:u((()=>[o(" 订单号："+n(e.Oid)+" ",1),ue,o(" 成交触发价："+n(e.BackPx)+" ",1),oe,o(" 成交量："+n(e.FillSz)+" ",1),de,o(" 止盈触发价："+n(e.Sell),1)])),_:2},1024),ne])),_:2},1024)))),256)),(t(!0),s(v,null,b(e.SpotBuys,((e,l,a)=>(t(),m(tl,{label:"现货挂单列表","label-align":"right",span:"2"},{default:u((()=>[i(il,null,{default:u((()=>[o(" 订单号："+n(e.Oid)+" 成交均价："+n(e.AvgPx)+" 成交量："+n(e.FillSz)+" 止盈触发价："+n(e.Sell),1)])),_:2},1024),pe])),_:2},1024)))),256))])),_:2},1024)))),256))])),_:1})])),_:1},8,["modelValue"])])}}});export{me as default};
