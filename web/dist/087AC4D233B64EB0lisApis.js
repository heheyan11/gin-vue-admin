/*! 
 Build based on gin-vue-admin 
 Time : 1698979068000 */
import{a as e,r as a,S as l,o as t,c as s,b as r,d as o,w as i,g as u,q as d,t as p,G as n,h as m,e as c,M as v,N as y,a4 as f,k as b,l as g,J as B,E as C}from"./087AC4D233B64EB0index.js";import{E as A,a as h,b as E}from"./087AC4D233B64EB0date-picker.js";import{E as D}from"./087AC4D233B64EB0dialog.js";import"./087AC4D233B64EB0overlay.js";import{E as _}from"./087AC4D233B64EB0scrollbar.js";import{E as j,a as k}from"./087AC4D233B64EB0radio.js";/* empty css                              */import{E as w,a as V}from"./087AC4D233B64EB0checkbox.js";import{E as K}from"./087AC4D233B64EB0pagination.js";/* empty css                     */import"./087AC4D233B64EB0tag.js";import"./087AC4D233B64EB0select.js";/* empty css                      */import{E as x,a as I}from"./087AC4D233B64EB0table-column.js";/* empty css                       */import{E as T}from"./087AC4D233B64EB0popover.js";import{a as U,E as S}from"./087AC4D233B64EB0form-item.js";/* empty css                      *//* empty css                     */import{g as q,d as z,f as F,a as O,c as P,u as J}from"./087AC4D233B64EB0lisApis2.js";import{g as M}from"./087AC4D233B64EB0lisCoins2.js";import{f as N}from"./087AC4D233B64EB0format.js";import{E as R}from"./087AC4D233B64EB0index21.js";import"./087AC4D233B64EB0arrays.js";import"./087AC4D233B64EB0index26.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0hasIn.js";import"./087AC4D233B64EB0index22.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0_initCloneObject.js";import"./087AC4D233B64EB0dropdown.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0_baseClone.js";import"./087AC4D233B64EB0date.js";import"./087AC4D233B64EB0dictionary.js";import"./087AC4D233B64EB0sysDictionary2.js";const G={class:"gva-search-box"},Q={class:"gva-table-box"},H={class:"gva-btn-list"},L=r("p",null,"确定要删除吗？",-1),W={style:{"text-align":"right","margin-top":"8px"}},X={class:"gva-pagination"},Y={class:"dialog-footer"},Z=Object.assign({name:"Apis"},{__name:"lisApis",setup(Z){const $=e({apiKey:"",passphrase:"",secretKey:"",status:"启动",symbol:[]}),ee=e({apiKey:[{required:!0,message:"请输入apikey",trigger:["input","blur"]}],passphrase:[{required:!0,message:"请输入passphrase",trigger:["input","blur"]}],secretKey:[{required:!0,message:"请输入secretKey",trigger:["input","blur"]}],status:[{required:!0,message:"请选择启动或停止",trigger:["select","blur"]}],symbol:[{required:!0,message:"请选择symbol",trigger:["select","blur"]}]}),ae=a({createdAt:[{validator:(e,a,l)=>{ue.value.startCreatedAt&&!ue.value.endCreatedAt?l(new Error("请填写结束日期")):!ue.value.startCreatedAt&&ue.value.endCreatedAt?l(new Error("请填写开始日期")):ue.value.startCreatedAt&&ue.value.endCreatedAt&&(ue.value.startCreatedAt.getTime()===ue.value.endCreatedAt.getTime()||ue.value.startCreatedAt.getTime()>ue.value.endCreatedAt.getTime())?l(new Error("开始日期应当早于结束日期")):l()},trigger:"change"}]}),le=e(),te=e(),se=e(1),re=e(0),oe=e(10),ie=e([]),ue=e({}),de=e([]),pe=()=>{ue.value={},ve()},ne=()=>{var e;null==(e=te.value)||e.validate((async e=>{e&&(se.value=1,oe.value=10,ve())}))},me=e=>{oe.value=e,ve()},ce=e=>{se.value=e,ve()},ve=async()=>{const e=await q({page:se.value,pageSize:oe.value,...ue.value});0===e.code&&(ie.value=e.data.list,re.value=e.data.total,se.value=e.data.page,oe.value=e.data.pageSize)};ve();(async()=>{})();const ye=e([]),fe=e=>{ye.value=e},be=e(!1),ge=async()=>{const e=[];if(0===ye.value.length)return void b({type:"warning",message:"请选择要删除的数据"});ye.value&&ye.value.map((a=>{e.push(a.ID)}));0===(await z({ids:e})).code&&(b({type:"success",message:"删除成功"}),ie.value.length===e.length&&se.value>1&&se.value--,be.value=!1,ve())},Be=e(""),Ce=async e=>{0===(await O({ID:e.ID})).code&&(b({type:"success",message:"删除成功"}),1===ie.value.length&&se.value>1&&se.value--,ve())},Ae=e(!1),he=e(!1),Ee=async e=>{const a=await F({ID:e.ID});0===a.code&&($.value=a.data.relisApis,he.value=!0)},De=()=>{he.value=!1,$.value={apiKey:"",passphrase:"",secretKey:"",status:"启动",symbol:[]}},_e=async()=>{let e=await M(),a=[];for(let l=0;l<e.data.list.length;l++){let t=e.data.list[l].name.split("-");a[l]={label:t[0],value:e.data.list[l].name}}de.value=a},je=()=>{_e(),Be.value="create",Ae.value=!0},ke=()=>{Ae.value=!1,$.value={apiKey:"",passphrase:"",secretKey:"",status:"启动",symbol:[]}},we=async()=>{var e;null==(e=le.value)||e.validate((async e=>{if(!e)return;let a;switch(Be.value){case"create":default:a=await P($.value);break;case"update":a=await J($.value)}0===a.code?(b({type:"success",message:"创建/更改成功"}),ke(),ve()):f({title:"提示",message:a.msg,confirmButtonText:"确定",showCancelButton:!1,closeOnClickModal:!1,type:"warning"})}))};return(e,a)=>{const b=g,q=U,z=l("QuestionFilled"),O=B,P=R,J=A,M=C,Z=S,ve=T,Ve=x,Ke=l("InfoFilled"),xe=I,Ie=K,Te=w,Ue=V,Se=j,qe=k,ze=_,Fe=D,Oe=h,Pe=E;return t(),s("div",null,[r("div",G,[o(Z,{ref_key:"elSearchFormRef",ref:te,inline:!0,model:ue.value,class:"demo-form-inline",rules:ae,onKeyup:d(ne,["enter"])},{default:i((()=>[o(q,{label:"apiKey"},{default:i((()=>[o(b,{modelValue:ue.value.apiKey,"onUpdate:modelValue":a[0]||(a[0]=e=>ue.value.apiKey=e),placeholder:"API Key"},null,8,["modelValue"])])),_:1}),o(q,{label:"创建日期",prop:"createdAt"},{label:i((()=>[r("span",null,[u(" 创建日期 "),o(P,{content:"搜索范围是开始日期（包含）至结束日期（不包含）"},{default:i((()=>[o(O,null,{default:i((()=>[o(z)])),_:1})])),_:1})])])),default:i((()=>[o(J,{modelValue:ue.value.startCreatedAt,"onUpdate:modelValue":a[1]||(a[1]=e=>ue.value.startCreatedAt=e),type:"datetime",placeholder:"开始日期","disabled-date":e=>!!ue.value.endCreatedAt&&e.getTime()>ue.value.endCreatedAt.getTime()},null,8,["modelValue","disabled-date"]),u(" — "),o(J,{modelValue:ue.value.endCreatedAt,"onUpdate:modelValue":a[2]||(a[2]=e=>ue.value.endCreatedAt=e),type:"datetime",placeholder:"结束日期","disabled-date":e=>!!ue.value.startCreatedAt&&e.getTime()<ue.value.startCreatedAt.getTime()},null,8,["modelValue","disabled-date"])])),_:1}),o(q,null,{default:i((()=>[o(M,{type:"primary",icon:"search",onClick:ne},{default:i((()=>[u("查询")])),_:1}),o(M,{icon:"refresh",onClick:pe},{default:i((()=>[u("重置")])),_:1})])),_:1})])),_:1},8,["model","rules","onKeyup"])]),r("div",Q,[r("div",H,[o(M,{type:"primary",icon:"plus",onClick:je},{default:i((()=>[u("新增")])),_:1}),o(ve,{visible:be.value,"onUpdate:visible":a[4]||(a[4]=e=>be.value=e),disabled:!ye.value.length,placement:"top",width:"160"},{default:i((()=>[L,r("div",W,[o(M,{type:"primary",link:"",onClick:a[3]||(a[3]=e=>be.value=!1)},{default:i((()=>[u("取消")])),_:1}),o(M,{type:"primary",onClick:ge},{default:i((()=>[u("确定")])),_:1})])])),_:1},8,["visible","disabled"])]),o(xe,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:ie.value,"row-key":"ID",onSelectionChange:fe},{default:i((()=>[o(Ve,{align:"left",label:"日期",width:"180"},{default:i((e=>[u(p(n(N)(e.row.CreatedAt)),1)])),_:1}),o(Ve,{align:"left",label:"ApiKey",prop:"apiKey",width:"285"}),o(Ve,{align:"left",label:"是否启动",prop:"status",width:"220"}),o(Ve,{align:"left",label:"操作"},{default:i((e=>[o(M,{type:"primary",link:"",class:"table-button",onClick:a=>Ee(e.row)},{default:i((()=>[o(O,{style:{"margin-right":"5px"}},{default:i((()=>[o(Ke)])),_:1}),u(" 查看详情 ")])),_:2},1032,["onClick"]),o(M,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:a=>(async e=>{const a=await F({ID:e.ID});_e(),a.data.relisApis.symbol=JSON.parse(a.data.relisApis.symbol),Be.value="update",0===a.code&&($.value=a.data.relisApis,Ae.value=!0)})(e.row)},{default:i((()=>[u("启动/停止")])),_:2},1032,["onClick"]),o(M,{type:"primary",link:"",icon:"delete",onClick:a=>{return l=e.row,void f.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{Ce(l)}));var l}},{default:i((()=>[u("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),r("div",X,[o(Ie,{layout:"total, sizes, prev, pager, next, jumper","current-page":se.value,"page-size":oe.value,"page-sizes":[10,30,50,100],total:re.value,onCurrentChange:ce,onSizeChange:me},null,8,["current-page","page-size","total"])])]),o(Fe,{modelValue:Ae.value,"onUpdate:modelValue":a[10]||(a[10]=e=>Ae.value=e),"before-close":ke,title:"create"===Be.value?"添加":"启动/停止","destroy-on-close":""},{footer:i((()=>[r("div",Y,[o(M,{onClick:ke},{default:i((()=>[u("取 消")])),_:1}),o(M,{type:"primary",onClick:we},{default:i((()=>[u("确 定")])),_:1})])])),default:i((()=>[o(ze,{height:"500px"},{default:i((()=>[o(Z,{model:$.value,"label-position":"right",ref_key:"elFormRef",ref:le,rules:ee.value,"label-width":"130px"},{default:i((()=>[o(q,{label:"API Key:",prop:"apiKey"},{default:i((()=>[o(b,{modelValue:$.value.apiKey,"onUpdate:modelValue":a[5]||(a[5]=e=>$.value.apiKey=e),clearable:!0,placeholder:"请输入API Key1",readonly:"create"!=Be.value&&"readonly"},null,8,["modelValue","readonly"])])),_:1}),"create"==Be.value?(t(),m(q,{key:0,label:"passphrase:",prop:"passphrase"},{default:i((()=>[o(b,{modelValue:$.value.passphrase,"onUpdate:modelValue":a[6]||(a[6]=e=>$.value.passphrase=e),clearable:!0,placeholder:"请输入passphrase密码"},null,8,["modelValue"])])),_:1})):c("",!0),"create"==Be.value?(t(),m(q,{key:1,label:"SecretKey:",prop:"secretKey"},{default:i((()=>[o(b,{modelValue:$.value.secretKey,"onUpdate:modelValue":a[7]||(a[7]=e=>$.value.secretKey=e),clearable:!0,placeholder:"请输入SecretKey"},null,8,["modelValue"])])),_:1})):c("",!0),o(q,{label:"symbol选择",prop:"symbol"},{default:i((()=>[o(Ue,{modelValue:$.value.symbol,"onUpdate:modelValue":a[8]||(a[8]=e=>$.value.symbol=e),clearable:!0},{default:i((()=>[(t(!0),s(v,null,y(de.value,((e,a)=>(t(),m(Te,{key:a,label:e.value,disabled:e.disabled,style:{"{display":"inline}"}},{default:i((()=>[u(p(e.label),1)])),_:2},1032,["label","disabled"])))),128))])),_:1},8,["modelValue"])])),_:1}),o(q,{label:"设置运行状态",prop:"启动停止"},{default:i((()=>[o(qe,{modelValue:$.value.status,"onUpdate:modelValue":a[9]||(a[9]=e=>$.value.status=e)},{default:i((()=>[(t(),s(v,null,y(["停止","启动"],(e=>o(Se,{key:e,label:e,clearable:!1,style:{"{display":"inline}"}},{default:i((()=>[u(p(e),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1},8,["modelValue","title"]),o(Fe,{modelValue:he.value,"onUpdate:modelValue":a[11]||(a[11]=e=>he.value=e),style:{width:"1200px"},"lock-scroll":"","before-close":De,title:"查看详情","destroy-on-close":""},{default:i((()=>[o(ze,{height:"550px"},{default:i((()=>[o(Pe,{column:"1",border:""},{default:i((()=>[o(Oe,{label:"ApiKey"},{default:i((()=>[u(p($.value.apiKey),1)])),_:1}),o(Oe,{label:"passphrase"},{default:i((()=>[u(p($.value.passphrase),1)])),_:1}),o(Oe,{label:"symbol"},{default:i((()=>[u(p($.value.symbol),1)])),_:1}),o(Oe,{label:"是否启动"},{default:i((()=>[u(p($.value.status),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}});export{Z as default};
