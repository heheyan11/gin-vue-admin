/*! 
 Build based on gin-vue-admin 
 Time : 1699839817000 */
import{a as e,r as a,P as l,o as t,c as s,b as i,d as r,w as u,g as o,q as d,t as n,G as p,h as m,e as c,M as v,N as y,a1 as b,k as g,l as f,J as C,E as B}from"./087AC4D233B64EB0index.js";import"./087AC4D233B64EB0tag.js";import{E as A}from"./087AC4D233B64EB0empty.js";import{E as h,a as _,b as E}from"./087AC4D233B64EB0date-picker.js";import{E as D}from"./087AC4D233B64EB0dialog.js";import"./087AC4D233B64EB0overlay.js";import{E as j}from"./087AC4D233B64EB0scrollbar.js";import{E as w,a as k}from"./087AC4D233B64EB0radio.js";/* empty css                              */import{E as K,a as V}from"./087AC4D233B64EB0checkbox.js";import{E as x}from"./087AC4D233B64EB0pagination.js";/* empty css                     */import"./087AC4D233B64EB0select.js";/* empty css                      */import{E as S,a as z}from"./087AC4D233B64EB0table-column.js";/* empty css                       */import{E as I}from"./087AC4D233B64EB0popover.js";import{a as U,E as T}from"./087AC4D233B64EB0form-item.js";/* empty css                      *//* empty css                     */import{g as P,d as F,f as O,a as q,b as Q,c as J,u as M}from"./087AC4D233B64EB0lisApis2.js";import{g as N}from"./087AC4D233B64EB0lisCoins2.js";import{f as R}from"./087AC4D233B64EB0format.js";import{E as G}from"./087AC4D233B64EB0index21.js";import{E as H}from"./087AC4D233B64EB0index22.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0hasIn.js";import"./087AC4D233B64EB0arrays.js";import"./087AC4D233B64EB0index26.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0_initCloneObject.js";import"./087AC4D233B64EB0dropdown.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0_baseClone.js";import"./087AC4D233B64EB0date.js";import"./087AC4D233B64EB0dictionary.js";import"./087AC4D233B64EB0sysDictionary2.js";const L={class:"gva-search-box"},W={class:"gva-table-box"},X={class:"gva-btn-list"},Y=i("p",null,"确定要删除吗？",-1),Z={style:{"text-align":"right","margin-top":"8px"}},$={class:"gva-pagination"},ee={class:"dialog-footer"},ae={class:"dialog-footer"},le=i("br",null,null,-1),te=i("br",null,null,-1),se=i("br",null,null,-1),ie=Object.assign({name:"Apis"},{__name:"lisApis",setup(ie){const re=e({apiKey:"",passphrase:"",secretKey:"",status:"启动",symbol:[]}),ue=e({apiKey:[{required:!0,message:"请输入apikey",trigger:["input","blur"]}],passphrase:[{required:!0,message:"请输入passphrase",trigger:["input","blur"]}],secretKey:[{required:!0,message:"请输入secretKey",trigger:["input","blur"]}],status:[{required:!0,message:"请选择启动或停止",trigger:["select","blur"]}],symbol:[{required:!0,message:"请选择symbol",trigger:["select","blur"]}]}),oe=a({createdAt:[{validator:(e,a,l)=>{ye.value.startCreatedAt&&!ye.value.endCreatedAt?l(new Error("请填写结束日期")):!ye.value.startCreatedAt&&ye.value.endCreatedAt?l(new Error("请填写开始日期")):ye.value.startCreatedAt&&ye.value.endCreatedAt&&(ye.value.startCreatedAt.getTime()===ye.value.endCreatedAt.getTime()||ye.value.startCreatedAt.getTime()>ye.value.endCreatedAt.getTime())?l(new Error("开始日期应当早于结束日期")):l()},trigger:"change"}]}),de=e(),ne=e(),pe=e(1),me=e(0),ce=e(5),ve=e([]),ye=e({}),be=e([]),ge=()=>{ye.value={},Ae()},fe=()=>{var e;null==(e=ne.value)||e.validate((async e=>{e&&(pe.value=1,ce.value=10,Ae())}))},Ce=e=>{ce.value=e,Ae()},Be=e=>{pe.value=e,Ae()},Ae=async()=>{const e=await P({page:pe.value,pageSize:ce.value,...ye.value});0===e.code&&(ve.value=e.data.list,me.value=e.data.total,pe.value=e.data.page,ce.value=e.data.pageSize)};Ae();(async()=>{})();const he=e([]),_e=e=>{he.value=e},Ee=e(!1),De=async()=>{const e=[];if(0===he.value.length)return void g({type:"warning",message:"请选择要删除的数据"});he.value&&he.value.map((a=>{e.push(a.ID)}));0===(await F({ids:e})).code&&(g({type:"success",message:"删除成功"}),ve.value.length===e.length&&pe.value>1&&pe.value--,Ee.value=!1,Ae())},je=e(""),we=async e=>{0===(await q({ID:e.ID})).code&&(g({type:"success",message:"删除成功"}),1===ve.value.length&&pe.value>1&&pe.value--,Ae())},ke=e(!1),Ke=e(!1),Ve=e(!1),xe=async e=>{const a=await O({ID:e.ID});0===a.code&&(re.value=a.data.relisApis,Ke.value=!0)},Se=async e=>{const a=await Q({apiKey:e.apiKey});0===a.code&&(Ie.value=a.data,Ve.value=!0)},ze=()=>{Ke.value=!1,re.value={apiKey:"",passphrase:"",secretKey:"",status:"启动",symbol:[]}},Ie=e({Childs:{},apiKey:""}),Ue=()=>{Ve.value=!1,Ie.value={Childs:{},apiKey:""}},Te=async()=>{let e=await N(),a=[];for(let l=0;l<e.data.list.length;l++){let t=e.data.list[l].name.split("-");a[l]={label:t[0],value:e.data.list[l].name}}be.value=a},Pe=()=>{Te(),je.value="create",ke.value=!0},Fe=()=>{ke.value=!1,re.value={apiKey:"",passphrase:"",secretKey:"",status:"启动",symbol:[]}},Oe=async()=>{var e;null==(e=de.value)||e.validate((async e=>{if(!e)return;let a;switch(je.value){case"create":default:a=await J(re.value);break;case"update":a=await M(re.value)}0===a.code?(g({type:"success",message:"创建/更改成功"}),Fe(),Ae()):b({title:"提示",message:a.msg,confirmButtonText:"确定",showCancelButton:!1,closeOnClickModal:!1,type:"warning"})}))};return(e,a)=>{const g=f,P=U,F=l("QuestionFilled"),q=C,J=G,M=h,N=B,ie=T,Ae=I,qe=S,Qe=l("InfoFilled"),Je=z,Me=x,Ne=K,Re=V,Ge=w,He=k,Le=j,We=D,Xe=_,Ye=E,Ze=A,$e=H;return t(),s("div",null,[i("div",L,[r(ie,{ref_key:"elSearchFormRef",ref:ne,inline:!0,model:ye.value,class:"demo-form-inline",rules:oe,onKeyup:d(fe,["enter"])},{default:u((()=>[r(P,{label:"apiKey"},{default:u((()=>[r(g,{modelValue:ye.value.apiKey,"onUpdate:modelValue":a[0]||(a[0]=e=>ye.value.apiKey=e),placeholder:"API Key"},null,8,["modelValue"])])),_:1}),r(P,{label:"创建日期",prop:"createdAt"},{label:u((()=>[i("span",null,[o(" 创建日期 "),r(J,{content:"搜索范围是开始日期（包含）至结束日期（不包含）"},{default:u((()=>[r(q,null,{default:u((()=>[r(F)])),_:1})])),_:1})])])),default:u((()=>[r(M,{modelValue:ye.value.startCreatedAt,"onUpdate:modelValue":a[1]||(a[1]=e=>ye.value.startCreatedAt=e),type:"datetime",placeholder:"开始日期","disabled-date":e=>!!ye.value.endCreatedAt&&e.getTime()>ye.value.endCreatedAt.getTime()},null,8,["modelValue","disabled-date"]),o(" — "),r(M,{modelValue:ye.value.endCreatedAt,"onUpdate:modelValue":a[2]||(a[2]=e=>ye.value.endCreatedAt=e),type:"datetime",placeholder:"结束日期","disabled-date":e=>!!ye.value.startCreatedAt&&e.getTime()<ye.value.startCreatedAt.getTime()},null,8,["modelValue","disabled-date"])])),_:1}),r(P,null,{default:u((()=>[r(N,{type:"primary",icon:"search",onClick:fe},{default:u((()=>[o("查询")])),_:1}),r(N,{icon:"refresh",onClick:ge},{default:u((()=>[o("重置")])),_:1})])),_:1})])),_:1},8,["model","rules","onKeyup"])]),i("div",W,[i("div",X,[r(N,{type:"primary",icon:"plus",onClick:Pe},{default:u((()=>[o("新增")])),_:1}),r(Ae,{visible:Ee.value,"onUpdate:visible":a[4]||(a[4]=e=>Ee.value=e),disabled:!he.value.length,placement:"top",width:"160"},{default:u((()=>[Y,i("div",Z,[r(N,{type:"primary",link:"",onClick:a[3]||(a[3]=e=>Ee.value=!1)},{default:u((()=>[o("取消")])),_:1}),r(N,{type:"primary",onClick:De},{default:u((()=>[o("确定")])),_:1})])])),_:1},8,["visible","disabled"])]),r(Je,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:ve.value,"row-key":"ID",onSelectionChange:_e},{default:u((()=>[r(qe,{align:"left",label:"日期",width:"180"},{default:u((e=>[o(n(p(R)(e.row.CreatedAt)),1)])),_:1}),r(qe,{align:"left",label:"ApiKey",prop:"apiKey",width:"285"}),r(qe,{align:"left",label:"正收益",prop:"zheng",width:"120"}),r(qe,{align:"left",label:"负收益",prop:"fu",width:"120"}),r(qe,{align:"left",label:"总收益",prop:"zong",width:"120"}),r(qe,{align:"left",label:"是否启动",prop:"status",width:"220"}),r(qe,{align:"left",label:"操作"},{default:u((e=>[r(N,{type:"primary",link:"",class:"table-button",onClick:a=>Se(e.row)},{default:u((()=>[r(q,{style:{"margin-right":"5px"}},{default:u((()=>[r(Qe)])),_:1}),o(" 查看状态 ")])),_:2},1032,["onClick"]),r(N,{type:"primary",link:"",class:"table-button",onClick:a=>xe(e.row)},{default:u((()=>[r(q,{style:{"margin-right":"5px"}},{default:u((()=>[r(Qe)])),_:1}),o(" 查看详情 ")])),_:2},1032,["onClick"]),r(N,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:a=>(async e=>{const a=await O({ID:e.ID});Te(),a.data.relisApis.symbol=JSON.parse(a.data.relisApis.symbol),je.value="update",0===a.code&&(re.value=a.data.relisApis,ke.value=!0)})(e.row)},{default:u((()=>[o("启动/停止")])),_:2},1032,["onClick"]),r(N,{type:"primary",link:"",icon:"delete",onClick:a=>{return l=e.row,void b.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{we(l)}));var l}},{default:u((()=>[o("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),i("div",$,[r(Me,{layout:"total, sizes, prev, pager, next, jumper","current-page":pe.value,"page-size":ce.value,"page-sizes":[5,30,50,100],total:me.value,onCurrentChange:Be,onSizeChange:Ce},null,8,["current-page","page-size","total"])])]),r(We,{modelValue:ke.value,"onUpdate:modelValue":a[10]||(a[10]=e=>ke.value=e),"before-close":Fe,title:"create"===je.value?"添加":"启动/停止","destroy-on-close":""},{footer:u((()=>[i("div",ee,[r(N,{onClick:Fe},{default:u((()=>[o("取 消")])),_:1}),r(N,{type:"primary",onClick:Oe},{default:u((()=>[o("确 定")])),_:1})])])),default:u((()=>[r(Le,{height:"500px"},{default:u((()=>[r(ie,{model:re.value,"label-position":"right",ref_key:"elFormRef",ref:de,rules:ue.value,"label-width":"130px"},{default:u((()=>[r(P,{label:"API Key:",prop:"apiKey"},{default:u((()=>[r(g,{modelValue:re.value.apiKey,"onUpdate:modelValue":a[5]||(a[5]=e=>re.value.apiKey=e),clearable:!0,placeholder:"请输入API Key1",readonly:"create"!=je.value&&"readonly"},null,8,["modelValue","readonly"])])),_:1}),"create"==je.value?(t(),m(P,{key:0,label:"passphrase:",prop:"passphrase"},{default:u((()=>[r(g,{modelValue:re.value.passphrase,"onUpdate:modelValue":a[6]||(a[6]=e=>re.value.passphrase=e),clearable:!0,placeholder:"请输入passphrase密码"},null,8,["modelValue"])])),_:1})):c("",!0),"create"==je.value?(t(),m(P,{key:1,label:"SecretKey:",prop:"secretKey"},{default:u((()=>[r(g,{modelValue:re.value.secretKey,"onUpdate:modelValue":a[7]||(a[7]=e=>re.value.secretKey=e),clearable:!0,placeholder:"请输入SecretKey"},null,8,["modelValue"])])),_:1})):c("",!0),r(P,{label:"symbol选择",prop:"symbol"},{default:u((()=>[r(Re,{modelValue:re.value.symbol,"onUpdate:modelValue":a[8]||(a[8]=e=>re.value.symbol=e),clearable:!0},{default:u((()=>[(t(!0),s(v,null,y(be.value,((e,a)=>(t(),m(Ne,{key:a,label:e.value,disabled:e.disabled,style:{"{display":"inline}"}},{default:u((()=>[o(n(e.label),1)])),_:2},1032,["label","disabled"])))),128))])),_:1},8,["modelValue"])])),_:1}),r(P,{label:"设置运行状态",prop:"启动停止"},{default:u((()=>[r(He,{modelValue:re.value.status,"onUpdate:modelValue":a[9]||(a[9]=e=>re.value.status=e)},{default:u((()=>[(t(),s(v,null,y(["停止","启动"],(e=>r(Ge,{key:e,label:e,clearable:!1,style:{"{display":"inline}"}},{default:u((()=>[o(n(e),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1},8,["modelValue","title"]),r(We,{modelValue:Ke.value,"onUpdate:modelValue":a[11]||(a[11]=e=>Ke.value=e),style:{width:"1200px"},"lock-scroll":"","before-close":ze,title:"查看详情","destroy-on-close":""},{default:u((()=>[r(Le,{height:"550px"},{default:u((()=>[r(Ye,{column:"1",border:""},{default:u((()=>[r(Xe,{label:"ApiKey"},{default:u((()=>[o(n(re.value.apiKey),1)])),_:1}),r(Xe,{label:"passphrase"},{default:u((()=>[o(n(re.value.passphrase),1)])),_:1}),r(Xe,{label:"symbol"},{default:u((()=>[o(n(re.value.symbol),1)])),_:1}),r(Xe,{label:"是否启动"},{default:u((()=>[o(n(re.value.status),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),r(We,{modelValue:Ve.value,"onUpdate:modelValue":a[13]||(a[13]=e=>Ve.value=e),style:{width:"1600px"},"lock-scroll":"","before-close":Ue,title:"查看状态","destroy-on-close":""},{default:u((()=>[r(Le,{height:"650px"},{default:u((()=>[i("div",ae,[r(N,{type:"primary",onClick:a[12]||(a[12]=e=>(async e=>{console.log(e);const a=await Q({apiKey:e});0===a.code&&(Ie.value=a.data)})(Ie.value.apiKey))},{default:u((()=>[o("刷 新")])),_:1})]),""==Ie.value.apiKey?(t(),m(Ze,{key:0,description:"暂无数据"})):c("",!0),(t(!0),s(v,null,y(Ie.value.Childs,((e,a,l)=>(t(),m(Ye,{column:"2",border:""},{default:u((()=>[r(Xe,{label:"symbol名称","label-align":"center"},{default:u((()=>[o(n(a),1)])),_:2},1024),r(Xe,{label:"状态","label-align":"right"},{default:u((()=>[o(n(1==e.Status?"比价":"做单"),1)])),_:2},1024),r(Xe,{label:"现货触发止盈价","label-align":"right"},{default:u((()=>[o(n(e.SpotSell),1)])),_:2},1024),r(Xe,{label:"现货买单均价","label-align":"right"},{default:u((()=>[o(n(e.SpotAvgPx),1)])),_:2},1024),r(Xe,{label:"现货成交数量","label-align":"right"},{default:u((()=>[o(n(e.SpotFillSz),1)])),_:2},1024),r(Xe,{label:"现货订单号","label-align":"right"},{default:u((()=>[o(n(e.SpotOid),1)])),_:2},1024),r(Xe,{label:"合约触发止盈价","label-align":"right"},{default:u((()=>[o(n(e.SwapSell),1)])),_:2},1024),r(Xe,{label:"合约买单均价","label-align":"right"},{default:u((()=>[o(n(e.SwapAvgPx),1)])),_:2},1024),r(Xe,{label:"合约成交数量","label-align":"right"},{default:u((()=>[o(n(e.SwapFillSz),1)])),_:2},1024),r(Xe,{label:"合约订单号","label-align":"right"},{default:u((()=>[o(n(e.SwapOid),1)])),_:2},1024),(t(!0),s(v,null,y(e.SpotQueue,((e,a,l)=>(t(),m(Xe,{label:"现货止盈队列","label-align":"right",span:"2"},{default:u((()=>[r($e,null,{default:u((()=>[o(" 订单号："+n(e.Oid)+" 成交触发价："+n(e.AvgPx)+" 成交量："+n(e.FillSz)+" 止盈触发价："+n(e.BackPx),1)])),_:2},1024),le])),_:2},1024)))),256)),(t(!0),s(v,null,y(e.SwapQueue,((e,a,l)=>(t(),m(Xe,{label:"合约止盈队列","label-align":"right",span:"2"},{default:u((()=>[r($e,null,{default:u((()=>[o(" 订单号："+n(e.Oid)+" 成交触发价："+n(e.AvgPx)+" 成交量："+n(e.FillSz)+" 止盈触发价："+n(e.BackPx),1)])),_:2},1024),te])),_:2},1024)))),256)),(t(!0),s(v,null,y(e.SpotBuys,((e,a,l)=>(t(),m(Xe,{label:"现货挂单列表","label-align":"right",span:"2"},{default:u((()=>[r($e,null,{default:u((()=>[o(" 订单号："+n(e.Oid)+" 成交均价："+n(e.AvgPx)+" 成交量："+n(e.FillSz)+" 止盈触发价："+n(e.Sell),1)])),_:2},1024),se])),_:2},1024)))),256))])),_:2},1024)))),256))])),_:1})])),_:1},8,["modelValue"])])}}});export{ie as default};
