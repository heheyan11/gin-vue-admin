/*! 
 Build based on gin-vue-admin 
 Time : 1699839817000 */
import{a as e,r as l,P as a,o as t,c as d,b as o,d as u,w as i,g as r,M as s,N as p,q as n,t as m,G as c,a1 as v,k as f,J as b,l as y,E as g}from"./087AC4D233B64EB0index.js";import{E as C,a as B,b as V}from"./087AC4D233B64EB0date-picker.js";import{E as _}from"./087AC4D233B64EB0dialog.js";import"./087AC4D233B64EB0overlay.js";import{E as h}from"./087AC4D233B64EB0scrollbar.js";import{E as A}from"./087AC4D233B64EB0pagination.js";/* empty css                     */import"./087AC4D233B64EB0tag.js";import{E,a as D}from"./087AC4D233B64EB0select.js";/* empty css                      */import{E as I,a as j}from"./087AC4D233B64EB0table-column.js";import"./087AC4D233B64EB0checkbox.js";/* empty css                       */import{E as k}from"./087AC4D233B64EB0popover.js";import{a as U,E as w}from"./087AC4D233B64EB0form-item.js";/* empty css                      *//* empty css                     */import{g as x,d as T,a as z,f as S,c as F,u as P}from"./087AC4D233B64EB0lis_orders2.js";import{f as K}from"./087AC4D233B64EB0format.js";import{E as N}from"./087AC4D233B64EB0index21.js";import"./087AC4D233B64EB0arrays.js";import"./087AC4D233B64EB0index26.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0hasIn.js";import"./087AC4D233B64EB0index22.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0_initCloneObject.js";import"./087AC4D233B64EB0dropdown.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0_baseClone.js";import"./087AC4D233B64EB0date.js";import"./087AC4D233B64EB0dictionary.js";import"./087AC4D233B64EB0sysDictionary2.js";const O={class:"gva-search-box"},R={class:"gva-table-box"},q={class:"gva-btn-list"},G=o("p",null,"确定要删除吗？",-1),J={style:{"text-align":"right","margin-top":"8px"}},M={class:"gva-pagination"},Q={class:"dialog-footer"},H=Object.assign({name:"Order"},{__name:"lis_orders",setup(H){const L=e({apikey:"",buyId:"",accFillSz:"",avgPx:"",ctime:"",code:"",msg:"",fee:"",feeCcy:"",fillTime:"",instId:"",instType:"",lever:"",notionalUsd:"",ordId:"",ordType:"",income:"",px:"",side:"",state:"",sz:""}),W=l({apikey:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}]}),X=l({createdAt:[{validator:(e,l,a)=>{te.value.startCreatedAt&&!te.value.endCreatedAt?a(new Error("请填写结束日期")):!te.value.startCreatedAt&&te.value.endCreatedAt?a(new Error("请填写开始日期")):te.value.startCreatedAt&&te.value.endCreatedAt&&(te.value.startCreatedAt.getTime()===te.value.endCreatedAt.getTime()||te.value.startCreatedAt.getTime()>te.value.endCreatedAt.getTime())?a(new Error("开始日期应当早于结束日期")):a()},trigger:"change"}]}),Y=e(),Z=e(),$=e(1),ee=e(0),le=e(10),ae=e([]),te=e({}),de=()=>{te.value={},re()},oe=()=>{var e;null==(e=Z.value)||e.validate((async e=>{e&&($.value=1,le.value=10,re())}))},ue=e=>{le.value=e,re()},ie=e=>{$.value=e,re()},re=async()=>{const e=await x({page:$.value,pageSize:le.value,...te.value});0===e.code&&(ae.value=e.data.list,ee.value=e.data.total,$.value=e.data.page,le.value=e.data.pageSize)};re();(async()=>{})();const se=e([]),pe=e=>{se.value=e},ne=e(!1),me=async()=>{const e=[];if(0===se.value.length)return void f({type:"warning",message:"请选择要删除的数据"});se.value&&se.value.map((l=>{e.push(l.ID)}));0===(await T({ids:e})).code&&(f({type:"success",message:"删除成功"}),ae.value.length===e.length&&$.value>1&&$.value--,ne.value=!1,re())},ce=e(""),ve=async e=>{0===(await z({ID:e.ID})).code&&(f({type:"success",message:"删除成功"}),1===ae.value.length&&$.value>1&&$.value--,re())},fe=e(!1),be=e(!1),ye=async e=>{const l=await S({ID:e.ID});0===l.code&&(L.value=l.data.relisOrders,be.value=!0)},ge=()=>{be.value=!1,L.value={apikey:"",buyId:"",accFillSz:"",avgPx:"",ctime:"",code:"",msg:"",fee:"",feeCcy:"",fillTime:"",instId:"",instType:"",lever:"",notionalUsd:"",ordId:"",ordType:"",income:"",px:"",side:"",state:"",sz:""}},Ce=()=>{fe.value=!1,L.value={apikey:"",buyId:"",accFillSz:"",avgPx:"",ctime:"",code:"",msg:"",fee:"",feeCcy:"",fillTime:"",instId:"",instType:"",lever:"",notionalUsd:"",ordId:"",ordType:"",income:"",px:"",side:"",state:"",sz:""}},Be=async()=>{var e;null==(e=Y.value)||e.validate((async e=>{if(!e)return;let l;switch(ce.value){case"create":default:l=await F(L.value);break;case"update":l=await P(L.value)}0===l.code&&(f({type:"success",message:"创建/更改成功"}),Ce(),re())}))};return(e,l)=>{const f=a("QuestionFilled"),x=b,T=N,z=C,S=U,F=y,P=E,H=D,re=g,Ve=w,_e=k,he=I,Ae=a("InfoFilled"),Ee=j,De=A,Ie=h,je=_,ke=B,Ue=V;return t(),d("div",null,[o("div",O,[u(Ve,{ref_key:"elSearchFormRef",ref:Z,inline:!0,model:te.value,class:"demo-form-inline",rules:X,onKeyup:n(oe,["enter"])},{default:i((()=>[u(S,{label:"订单创建日期",prop:"createdAt"},{label:i((()=>[o("span",null,[r(" 订单创建日期 "),u(T,{content:"搜索范围是开始日期（包含）至结束日期（不包含）"},{default:i((()=>[u(x,null,{default:i((()=>[u(f)])),_:1})])),_:1})])])),default:i((()=>[u(z,{modelValue:te.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>te.value.startCreatedAt=e),type:"datetime",placeholder:"开始日期","disabled-date":e=>!!te.value.endCreatedAt&&e.getTime()>te.value.endCreatedAt.getTime()},null,8,["modelValue","disabled-date"]),r(" — "),u(z,{modelValue:te.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>te.value.endCreatedAt=e),type:"datetime",placeholder:"结束日期","disabled-date":e=>!!te.value.startCreatedAt&&e.getTime()<te.value.startCreatedAt.getTime()},null,8,["modelValue","disabled-date"])])),_:1}),u(S,{label:"apikey",prop:"apiKey"},{default:i((()=>[u(F,{modelValue:te.value.apiKey,"onUpdate:modelValue":l[2]||(l[2]=e=>te.value.apiKey=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),u(S,{label:"买单id",prop:"buyId"},{default:i((()=>[u(F,{modelValue:te.value.buyId,"onUpdate:modelValue":l[3]||(l[3]=e=>te.value.buyId=e),placeholder:"买单id"},null,8,["modelValue"])])),_:1}),u(S,{label:"产品id",prop:"ordId"},{default:i((()=>[u(F,{modelValue:te.value.ordId,"onUpdate:modelValue":l[4]||(l[4]=e=>te.value.ordId=e),placeholder:"产品id"},null,8,["modelValue"])])),_:1}),u(S,{label:"产品类型"},{default:i((()=>[u(H,{modelValue:te.value.instType,"onUpdate:modelValue":l[5]||(l[5]=e=>te.value.instType=e),clearable:"",placeholder:"请选择"},{default:i((()=>[(t(),d(s,null,p([{label:"币币",value:"spot"},{label:"永续",value:"swap"}],(e=>u(P,{key:e.value,label:"".concat(e.label,"(").concat(e.value,")"),value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),u(S,null,{default:i((()=>[u(re,{type:"primary",icon:"search",onClick:oe},{default:i((()=>[r("查询")])),_:1}),u(re,{icon:"refresh",onClick:de},{default:i((()=>[r("重置")])),_:1})])),_:1})])),_:1},8,["model","rules","onKeyup"])]),o("div",R,[o("div",q,[u(_e,{visible:ne.value,"onUpdate:visible":l[8]||(l[8]=e=>ne.value=e),disabled:!se.value.length,placement:"top",width:"160"},{reference:i((()=>[u(re,{icon:"delete",style:{"margin-left":"10px"},disabled:!se.value.length,onClick:l[7]||(l[7]=e=>ne.value=!0)},{default:i((()=>[r("删除")])),_:1},8,["disabled"])])),default:i((()=>[G,o("div",J,[u(re,{type:"primary",link:"",onClick:l[6]||(l[6]=e=>ne.value=!1)},{default:i((()=>[r("取消")])),_:1}),u(re,{type:"primary",onClick:me},{default:i((()=>[r("确定")])),_:1})])])),_:1},8,["visible","disabled"])]),u(Ee,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:ae.value,"row-key":"ID",onSelectionChange:pe},{default:i((()=>[u(he,{type:"selection",width:"55"}),u(he,{align:"left",label:"用户apikey",prop:"apikey",width:"170"}),u(he,{align:"left",label:"累计成交量",prop:"accFillSz",width:"120"}),u(he,{align:"left",label:"买单id",prop:"buyId",width:"120"}),u(he,{align:"left",label:"卖单Id",prop:"ordId",width:"120"}),u(he,{align:"left",label:"买单均价",prop:"buyAvgPx",width:"120"}),u(he,{align:"left",label:"卖单均价",prop:"avgPx",width:"120"}),u(he,{align:"left",label:"收益",prop:"income",width:"120"}),u(he,{align:"left",label:"收益率",prop:"pnlRate",width:"120"}),u(he,{align:"left",label:"创建订单的时间",prop:"fillTime",width:"120"},{default:i((e=>[r(m(c(K)(e.row.ctime)),1)])),_:1}),u(he,{align:"left",label:"产品类型",prop:"instId",width:"120"}),u(he,{align:"left",label:"操作"},{default:i((e=>[u(re,{type:"primary",link:"",class:"table-button",onClick:l=>ye(e.row)},{default:i((()=>[u(x,{style:{"margin-right":"5px"}},{default:i((()=>[u(Ae)])),_:1}),r(" 查看详情 ")])),_:2},1032,["onClick"]),u(re,{type:"primary",link:"",icon:"delete",onClick:l=>{return a=e.row,void v.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ve(a)}));var a}},{default:i((()=>[r("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),o("div",M,[u(De,{layout:"total, sizes, prev, pager, next, jumper","current-page":$.value,"page-size":le.value,"page-sizes":[10,30,50,100],total:ee.value,onCurrentChange:ie,onSizeChange:ue},null,8,["current-page","page-size","total"])])]),u(je,{modelValue:fe.value,"onUpdate:modelValue":l[25]||(l[25]=e=>fe.value=e),"before-close":Ce,title:"create"===ce.value?"添加":"修改","destroy-on-close":""},{footer:i((()=>[o("div",Q,[u(re,{onClick:Ce},{default:i((()=>[r("取 消")])),_:1}),u(re,{type:"primary",onClick:Be},{default:i((()=>[r("确 定")])),_:1})])])),default:i((()=>[u(Ie,{height:"500px"},{default:i((()=>[u(Ve,{model:L.value,"label-position":"right",ref_key:"elFormRef",ref:Y,rules:W,"label-width":"80px"},{default:i((()=>[u(S,{label:"用户apikey:",prop:"apikey"},{default:i((()=>[u(F,{modelValue:L.value.apikey,"onUpdate:modelValue":l[9]||(l[9]=e=>L.value.apikey=e),clearable:!0,placeholder:"请输入用户apikey"},null,8,["modelValue"])])),_:1}),u(S,{label:"买单id:",prop:"buyId"},{default:i((()=>[u(F,{modelValue:L.value.buyId,"onUpdate:modelValue":l[10]||(l[10]=e=>L.value.buyId=e),clearable:!0,placeholder:"请输入买单id"},null,8,["modelValue"])])),_:1}),u(S,{label:"委托数量:",prop:"sz"},{default:i((()=>[u(F,{modelValue:L.value.sz,"onUpdate:modelValue":l[11]||(l[11]=e=>L.value.sz=e),clearable:!0,placeholder:"请输入委托数量"},null,8,["modelValue"])])),_:1}),u(S,{label:"累计成交量:",prop:"accFillSz"},{default:i((()=>[u(F,{modelValue:L.value.accFillSz,"onUpdate:modelValue":l[12]||(l[12]=e=>L.value.accFillSz=e),clearable:!0,placeholder:"请输入累计成交量"},null,8,["modelValue"])])),_:1}),u(S,{label:"成交均价:",prop:"avgPx"},{default:i((()=>[u(F,{modelValue:L.value.avgPx,"onUpdate:modelValue":l[13]||(l[13]=e=>L.value.avgPx=e),clearable:!0,placeholder:"请输入成交均价"},null,8,["modelValue"])])),_:1}),u(S,{label:"创建订单的时间:",prop:"ctime"},{default:i((()=>[u(F,{modelValue:L.value.ctime,"onUpdate:modelValue":l[14]||(l[14]=e=>L.value.ctime=e),clearable:!0,placeholder:"请输入创建订单的时间"},null,8,["modelValue"])])),_:1}),u(S,{label:"累计手续费:",prop:"fee"},{default:i((()=>[u(F,{modelValue:L.value.fee,"onUpdate:modelValue":l[15]||(l[15]=e=>L.value.fee=e),clearable:!0,placeholder:"请输入累计手续费"},null,8,["modelValue"])])),_:1}),u(S,{label:"委托单美元价值:",prop:"notionalUsd"},{default:i((()=>[u(F,{modelValue:L.value.notionalUsd,"onUpdate:modelValue":l[16]||(l[16]=e=>L.value.notionalUsd=e),clearable:!0,placeholder:"请输入委托单美元价值"},null,8,["modelValue"])])),_:1}),u(S,{label:"委托单已成交美元价值:",prop:"fillNotionalUsd"},{default:i((()=>[u(F,{modelValue:L.value.fillNotionalUsd,"onUpdate:modelValue":l[17]||(l[17]=e=>L.value.fillNotionalUsd=e),clearable:!0,placeholder:"请输入委托单已成交美元价值"},null,8,["modelValue"])])),_:1}),u(S,{label:"最新成交时间:",prop:"fillTime"},{default:i((()=>[u(F,{modelValue:L.value.fillTime,"onUpdate:modelValue":l[18]||(l[18]=e=>L.value.fillTime=e),clearable:!0,placeholder:"请输入最新成交时间"},null,8,["modelValue"])])),_:1}),u(S,{label:"产品id:",prop:"instId"},{default:i((()=>[u(F,{modelValue:L.value.instId,"onUpdate:modelValue":l[19]||(l[19]=e=>L.value.instId=e),clearable:!0,placeholder:"请输入产品id"},null,8,["modelValue"])])),_:1}),u(S,{label:"产品类型:",prop:"instType"},{default:i((()=>[u(F,{modelValue:L.value.instType,"onUpdate:modelValue":l[20]||(l[20]=e=>L.value.instType=e),clearable:!0,placeholder:"请输入产品类型"},null,8,["modelValue"])])),_:1}),u(S,{label:"杠杆倍数:",prop:"lever"},{default:i((()=>[u(F,{modelValue:L.value.lever,"onUpdate:modelValue":l[21]||(l[21]=e=>L.value.lever=e),clearable:!0,placeholder:"请输入杠杆倍数"},null,8,["modelValue"])])),_:1}),u(S,{label:"产品Id:",prop:"ordId"},{default:i((()=>[u(F,{modelValue:L.value.ordId,"onUpdate:modelValue":l[22]||(l[22]=e=>L.value.ordId=e),clearable:!0,placeholder:"请输入产品Id"},null,8,["modelValue"])])),_:1}),u(S,{label:"收益:",prop:"income"},{default:i((()=>[u(F,{modelValue:L.value.income,"onUpdate:modelValue":l[23]||(l[23]=e=>L.value.income=e),clearable:!0,placeholder:"请输入收益"},null,8,["modelValue"])])),_:1}),u(S,{label:"订单方向:",prop:"side"},{default:i((()=>[u(F,{modelValue:L.value.side,"onUpdate:modelValue":l[24]||(l[24]=e=>L.value.side=e),clearable:!0,placeholder:"请输入订单方向"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1},8,["modelValue","title"]),u(je,{modelValue:be.value,"onUpdate:modelValue":l[26]||(l[26]=e=>be.value=e),style:{width:"800px"},"lock-scroll":"","before-close":ge,title:"查看详情","destroy-on-close":""},{default:i((()=>[u(Ie,{height:"550px"},{default:i((()=>[u(Ue,{column:"1",border:""},{default:i((()=>[u(ke,{label:"用户apikey"},{default:i((()=>[r(m(L.value.apikey),1)])),_:1}),u(ke,{label:"产品类型"},{default:i((()=>[r(m(L.value.instId),1)])),_:1}),u(ke,{label:"买单id"},{default:i((()=>[r(m(L.value.buyId),1)])),_:1}),u(ke,{label:"卖单Id"},{default:i((()=>[r(m(L.value.ordId),1)])),_:1}),u(ke,{label:"买单美元价值"},{default:i((()=>[r(m(L.value.buyNotionalUsd),1)])),_:1}),u(ke,{label:"卖单美元价值"},{default:i((()=>[r(m(L.value.notionalUsd),1)])),_:1}),u(ke,{label:"成交量"},{default:i((()=>[r(m(L.value.accFillSz),1)])),_:1}),u(ke,{label:"买单均价"},{default:i((()=>[r(m(L.value.buyAvgPx),1)])),_:1}),u(ke,{label:"卖单均价"},{default:i((()=>[r(m(L.value.avgPx),1)])),_:1}),u(ke,{label:"收益"},{default:i((()=>[r(m(L.value.income),1)])),_:1}),u(ke,{label:"收益率"},{default:i((()=>[r(m(L.value.pnlRate),1)])),_:1}),u(ke,{label:"创建订单的时间"},{default:i((()=>[r(m(""!=L.value.ctime?c(K)(L.value.ctime):""),1)])),_:1}),u(ke,{label:"卖单手续费"},{default:i((()=>[r(m(L.value.fee),1)])),_:1}),u(ke,{label:"产品类型"},{default:i((()=>[r(m(L.value.instType),1)])),_:1}),u(ke,{label:"杠杆倍数"},{default:i((()=>[r(m(L.value.lever),1)])),_:1}),u(ke,{label:"订单方向"},{default:i((()=>[r(m(L.value.side),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}});export{H as default};
