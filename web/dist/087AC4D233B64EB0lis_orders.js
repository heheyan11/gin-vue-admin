/*! 
 Build based on gin-vue-admin 
 Time : 1698981314000 */
import{a as e,r as l,S as a,o as t,c as d,b as u,d as o,w as r,g as i,M as p,N as s,q as n,t as m,G as v,a4 as c,k as f,J as b,l as y,E as V}from"./087AC4D233B64EB0index.js";import{E as g,a as _,b as C}from"./087AC4D233B64EB0date-picker.js";import{E as B}from"./087AC4D233B64EB0dialog.js";import"./087AC4D233B64EB0overlay.js";import{E as h}from"./087AC4D233B64EB0scrollbar.js";import{E as A}from"./087AC4D233B64EB0pagination.js";/* empty css                     */import"./087AC4D233B64EB0tag.js";import{E,a as U}from"./087AC4D233B64EB0select.js";/* empty css                      */import{E as D,a as I}from"./087AC4D233B64EB0table-column.js";import"./087AC4D233B64EB0checkbox.js";/* empty css                       */import{E as k}from"./087AC4D233B64EB0popover.js";import{a as j,E as T}from"./087AC4D233B64EB0form-item.js";/* empty css                      *//* empty css                     */import{g as w,d as x,a as z,f as S,c as F,u as M}from"./087AC4D233B64EB0lis_orders2.js";import{f as N}from"./087AC4D233B64EB0format.js";import{E as P}from"./087AC4D233B64EB0index21.js";import"./087AC4D233B64EB0arrays.js";import"./087AC4D233B64EB0index26.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0hasIn.js";import"./087AC4D233B64EB0index22.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0_initCloneObject.js";import"./087AC4D233B64EB0dropdown.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0_baseClone.js";import"./087AC4D233B64EB0date.js";import"./087AC4D233B64EB0dictionary.js";import"./087AC4D233B64EB0sysDictionary2.js";const K={class:"gva-search-box"},O={class:"gva-table-box"},q={class:"gva-btn-list"},R=u("p",null,"确定要删除吗？",-1),G={style:{"text-align":"right","margin-top":"8px"}},J={class:"gva-pagination"},Q={class:"dialog-footer"},W=Object.assign({name:"Order"},{__name:"lis_orders",setup(W){const H=e({apikey:"",buyId:"",accFillSz:"",avgPx:"",ctime:"",code:"",msg:"",fee:"",feeCcy:"",fillNotionalUsd:"",fillTime:"",instId:"",instType:"",lever:"",notionalUsd:"",ordId:"",ordType:"",pnl:"",px:"",side:"",state:"",sz:"",tdMode:""}),L=l({apikey:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}]}),X=l({createdAt:[{validator:(e,l,a)=>{te.value.startCreatedAt&&!te.value.endCreatedAt?a(new Error("请填写结束日期")):!te.value.startCreatedAt&&te.value.endCreatedAt?a(new Error("请填写开始日期")):te.value.startCreatedAt&&te.value.endCreatedAt&&(te.value.startCreatedAt.getTime()===te.value.endCreatedAt.getTime()||te.value.startCreatedAt.getTime()>te.value.endCreatedAt.getTime())?a(new Error("开始日期应当早于结束日期")):a()},trigger:"change"}]}),Y=e(),Z=e(),$=e(1),ee=e(0),le=e(10),ae=e([]),te=e({}),de=()=>{te.value={},ie()},ue=()=>{var e;null==(e=Z.value)||e.validate((async e=>{e&&($.value=1,le.value=10,ie())}))},oe=e=>{le.value=e,ie()},re=e=>{$.value=e,ie()},ie=async()=>{const e=await w({page:$.value,pageSize:le.value,...te.value});0===e.code&&(ae.value=e.data.list,ee.value=e.data.total,$.value=e.data.page,le.value=e.data.pageSize)};ie();(async()=>{})();const pe=e([]),se=e=>{pe.value=e},ne=e(!1),me=async()=>{const e=[];if(0===pe.value.length)return void f({type:"warning",message:"请选择要删除的数据"});pe.value&&pe.value.map((l=>{e.push(l.ID)}));0===(await x({ids:e})).code&&(f({type:"success",message:"删除成功"}),ae.value.length===e.length&&$.value>1&&$.value--,ne.value=!1,ie())},ve=e(""),ce=async e=>{0===(await z({ID:e.ID})).code&&(f({type:"success",message:"删除成功"}),1===ae.value.length&&$.value>1&&$.value--,ie())},fe=e(!1),be=e(!1),ye=async e=>{const l=await S({ID:e.ID});0===l.code&&(H.value=l.data.relisOrders,be.value=!0)},Ve=()=>{be.value=!1,H.value={apikey:"",buyId:"",accFillSz:"",avgPx:"",ctime:"",code:"",msg:"",fee:"",feeCcy:"",fillNotionalUsd:"",fillTime:"",instId:"",instType:"",lever:"",notionalUsd:"",ordId:"",ordType:"",pnl:"",px:"",side:"",state:"",sz:"",tdMode:""}},ge=()=>{fe.value=!1,H.value={apikey:"",buyId:"",accFillSz:"",avgPx:"",ctime:"",code:"",msg:"",fee:"",feeCcy:"",fillNotionalUsd:"",fillTime:"",instId:"",instType:"",lever:"",notionalUsd:"",ordId:"",ordType:"",pnl:"",px:"",side:"",state:"",sz:"",tdMode:""}},_e=async()=>{var e;null==(e=Y.value)||e.validate((async e=>{if(!e)return;let l;switch(ve.value){case"create":default:l=await F(H.value);break;case"update":l=await M(H.value)}0===l.code&&(f({type:"success",message:"创建/更改成功"}),ge(),ie())}))};return(e,l)=>{const f=a("QuestionFilled"),w=b,x=P,z=g,S=j,F=y,M=E,W=U,ie=V,Ce=T,Be=k,he=D,Ae=a("InfoFilled"),Ee=I,Ue=A,De=h,Ie=B,ke=_,je=C;return t(),d("div",null,[u("div",K,[o(Ce,{ref_key:"elSearchFormRef",ref:Z,inline:!0,model:te.value,class:"demo-form-inline",rules:X,onKeyup:n(ue,["enter"])},{default:r((()=>[o(S,{label:"订单创建日期",prop:"createdAt"},{label:r((()=>[u("span",null,[i(" 订单创建日期 "),o(x,{content:"搜索范围是开始日期（包含）至结束日期（不包含）"},{default:r((()=>[o(w,null,{default:r((()=>[o(f)])),_:1})])),_:1})])])),default:r((()=>[o(z,{modelValue:te.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>te.value.startCreatedAt=e),type:"datetime",placeholder:"开始日期","disabled-date":e=>!!te.value.endCreatedAt&&e.getTime()>te.value.endCreatedAt.getTime()},null,8,["modelValue","disabled-date"]),i(" — "),o(z,{modelValue:te.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>te.value.endCreatedAt=e),type:"datetime",placeholder:"结束日期","disabled-date":e=>!!te.value.startCreatedAt&&e.getTime()<te.value.startCreatedAt.getTime()},null,8,["modelValue","disabled-date"])])),_:1}),o(S,{label:"apikey",prop:"apiKey"},{default:r((()=>[o(F,{modelValue:te.value.apiKey,"onUpdate:modelValue":l[2]||(l[2]=e=>te.value.apiKey=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),o(S,{label:"买单id",prop:"buyId"},{default:r((()=>[o(F,{modelValue:te.value.buyId,"onUpdate:modelValue":l[3]||(l[3]=e=>te.value.buyId=e),placeholder:"买单id"},null,8,["modelValue"])])),_:1}),o(S,{label:"产品id",prop:"ordId"},{default:r((()=>[o(F,{modelValue:te.value.ordId,"onUpdate:modelValue":l[4]||(l[4]=e=>te.value.ordId=e),placeholder:"产品id"},null,8,["modelValue"])])),_:1}),o(S,{label:"产品类型"},{default:r((()=>[o(W,{modelValue:te.value.instType,"onUpdate:modelValue":l[5]||(l[5]=e=>te.value.instType=e),clearable:"",placeholder:"请选择"},{default:r((()=>[(t(),d(p,null,s([{label:"币币",value:"spot"},{label:"永续",value:"swap"}],(e=>o(M,{key:e.value,label:"".concat(e.label,"(").concat(e.value,")"),value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),o(S,{label:"订单方向"},{default:r((()=>[o(W,{modelValue:te.value.side,"onUpdate:modelValue":l[6]||(l[6]=e=>te.value.side=e),clearable:"",placeholder:"请选择"},{default:r((()=>[(t(),d(p,null,s([{label:"买入",value:"buy"},{label:"卖出",value:"sell"}],(e=>o(M,{key:e.value,label:"".concat(e.label,"(").concat(e.value,")"),value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),o(S,{label:"交易模式"},{default:r((()=>[o(W,{modelValue:te.value.tdMode,"onUpdate:modelValue":l[7]||(l[7]=e=>te.value.tdMode=e),clearable:"",placeholder:"请选择"},{default:r((()=>[(t(),d(p,null,s([{label:"现金",value:"cash"},{label:"全仓",value:"cross"}],(e=>o(M,{key:e.value,label:"".concat(e.label,"(").concat(e.value,")"),value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),o(S,null,{default:r((()=>[o(ie,{type:"primary",icon:"search",onClick:ue},{default:r((()=>[i("查询")])),_:1}),o(ie,{icon:"refresh",onClick:de},{default:r((()=>[i("重置")])),_:1})])),_:1})])),_:1},8,["model","rules","onKeyup"])]),u("div",O,[u("div",q,[o(Be,{visible:ne.value,"onUpdate:visible":l[10]||(l[10]=e=>ne.value=e),disabled:!pe.value.length,placement:"top",width:"160"},{reference:r((()=>[o(ie,{icon:"delete",style:{"margin-left":"10px"},disabled:!pe.value.length,onClick:l[9]||(l[9]=e=>ne.value=!0)},{default:r((()=>[i("删除")])),_:1},8,["disabled"])])),default:r((()=>[R,u("div",G,[o(ie,{type:"primary",link:"",onClick:l[8]||(l[8]=e=>ne.value=!1)},{default:r((()=>[i("取消")])),_:1}),o(ie,{type:"primary",onClick:me},{default:r((()=>[i("确定")])),_:1})])])),_:1},8,["visible","disabled"])]),o(Ee,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:ae.value,"row-key":"ID",onSelectionChange:se},{default:r((()=>[o(he,{type:"selection",width:"55"}),o(he,{align:"left",label:"用户apikey",prop:"apikey",width:"120"}),o(he,{align:"left",label:"产品Id",prop:"ordId",width:"120"}),o(he,{align:"left",label:"买单id",prop:"buyId",width:"120"}),o(he,{align:"left",label:"委托数量,(SWAP为张)",prop:"sz",width:"120"}),o(he,{align:"left",label:"累计成交量",prop:"accFillSz",width:"120"}),o(he,{align:"left",label:"收益",prop:"pnl",width:"120"}),o(he,{align:"left",label:"成交均价",prop:"avgPx",width:"120"}),o(he,{align:"left",label:"创建订单的时间",prop:"fillTime",width:"120"},{default:r((e=>[i(m(v(N)(e.row.ctime)),1)])),_:1}),o(he,{align:"left",label:"产品类型",prop:"instId",width:"120"}),o(he,{align:"left",label:"操作"},{default:r((e=>[o(ie,{type:"primary",link:"",class:"table-button",onClick:l=>ye(e.row)},{default:r((()=>[o(w,{style:{"margin-right":"5px"}},{default:r((()=>[o(Ae)])),_:1}),i(" 查看详情 ")])),_:2},1032,["onClick"]),o(ie,{type:"primary",link:"",icon:"delete",onClick:l=>{return a=e.row,void c.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ce(a)}));var a}},{default:r((()=>[i("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),u("div",J,[o(Ue,{layout:"total, sizes, prev, pager, next, jumper","current-page":$.value,"page-size":le.value,"page-sizes":[10,30,50,100],total:ee.value,onCurrentChange:re,onSizeChange:oe},null,8,["current-page","page-size","total"])])]),o(Ie,{modelValue:fe.value,"onUpdate:modelValue":l[30]||(l[30]=e=>fe.value=e),"before-close":ge,title:"create"===ve.value?"添加":"修改","destroy-on-close":""},{footer:r((()=>[u("div",Q,[o(ie,{onClick:ge},{default:r((()=>[i("取 消")])),_:1}),o(ie,{type:"primary",onClick:_e},{default:r((()=>[i("确 定")])),_:1})])])),default:r((()=>[o(De,{height:"500px"},{default:r((()=>[o(Ce,{model:H.value,"label-position":"right",ref_key:"elFormRef",ref:Y,rules:L,"label-width":"80px"},{default:r((()=>[o(S,{label:"用户apikey:",prop:"apikey"},{default:r((()=>[o(F,{modelValue:H.value.apikey,"onUpdate:modelValue":l[11]||(l[11]=e=>H.value.apikey=e),clearable:!0,placeholder:"请输入用户apikey"},null,8,["modelValue"])])),_:1}),o(S,{label:"买单id:",prop:"buyId"},{default:r((()=>[o(F,{modelValue:H.value.buyId,"onUpdate:modelValue":l[12]||(l[12]=e=>H.value.buyId=e),clearable:!0,placeholder:"请输入买单id"},null,8,["modelValue"])])),_:1}),o(S,{label:"委托数量:",prop:"sz"},{default:r((()=>[o(F,{modelValue:H.value.sz,"onUpdate:modelValue":l[13]||(l[13]=e=>H.value.sz=e),clearable:!0,placeholder:"请输入委托数量"},null,8,["modelValue"])])),_:1}),o(S,{label:"累计成交量:",prop:"accFillSz"},{default:r((()=>[o(F,{modelValue:H.value.accFillSz,"onUpdate:modelValue":l[14]||(l[14]=e=>H.value.accFillSz=e),clearable:!0,placeholder:"请输入累计成交量"},null,8,["modelValue"])])),_:1}),o(S,{label:"成交均价:",prop:"avgPx"},{default:r((()=>[o(F,{modelValue:H.value.avgPx,"onUpdate:modelValue":l[15]||(l[15]=e=>H.value.avgPx=e),clearable:!0,placeholder:"请输入成交均价"},null,8,["modelValue"])])),_:1}),o(S,{label:"创建订单的时间:",prop:"ctime"},{default:r((()=>[o(F,{modelValue:H.value.ctime,"onUpdate:modelValue":l[16]||(l[16]=e=>H.value.ctime=e),clearable:!0,placeholder:"请输入创建订单的时间"},null,8,["modelValue"])])),_:1}),o(S,{label:"累计手续费:",prop:"fee"},{default:r((()=>[o(F,{modelValue:H.value.fee,"onUpdate:modelValue":l[17]||(l[17]=e=>H.value.fee=e),clearable:!0,placeholder:"请输入累计手续费"},null,8,["modelValue"])])),_:1}),o(S,{label:"手续费币种:",prop:"feeCcy"},{default:r((()=>[o(F,{modelValue:H.value.feeCcy,"onUpdate:modelValue":l[18]||(l[18]=e=>H.value.feeCcy=e),clearable:!0,placeholder:"请输入手续费币种"},null,8,["modelValue"])])),_:1}),o(S,{label:"委托单美元价值:",prop:"notionalUsd"},{default:r((()=>[o(F,{modelValue:H.value.notionalUsd,"onUpdate:modelValue":l[19]||(l[19]=e=>H.value.notionalUsd=e),clearable:!0,placeholder:"请输入委托单美元价值"},null,8,["modelValue"])])),_:1}),o(S,{label:"委托单已成交美元价值:",prop:"fillNotionalUsd"},{default:r((()=>[o(F,{modelValue:H.value.fillNotionalUsd,"onUpdate:modelValue":l[20]||(l[20]=e=>H.value.fillNotionalUsd=e),clearable:!0,placeholder:"请输入委托单已成交美元价值"},null,8,["modelValue"])])),_:1}),o(S,{label:"最新成交时间:",prop:"fillTime"},{default:r((()=>[o(F,{modelValue:H.value.fillTime,"onUpdate:modelValue":l[21]||(l[21]=e=>H.value.fillTime=e),clearable:!0,placeholder:"请输入最新成交时间"},null,8,["modelValue"])])),_:1}),o(S,{label:"产品id:",prop:"instId"},{default:r((()=>[o(F,{modelValue:H.value.instId,"onUpdate:modelValue":l[22]||(l[22]=e=>H.value.instId=e),clearable:!0,placeholder:"请输入产品id"},null,8,["modelValue"])])),_:1}),o(S,{label:"产品类型:",prop:"instType"},{default:r((()=>[o(F,{modelValue:H.value.instType,"onUpdate:modelValue":l[23]||(l[23]=e=>H.value.instType=e),clearable:!0,placeholder:"请输入产品类型"},null,8,["modelValue"])])),_:1}),o(S,{label:"杠杆倍数:",prop:"lever"},{default:r((()=>[o(F,{modelValue:H.value.lever,"onUpdate:modelValue":l[24]||(l[24]=e=>H.value.lever=e),clearable:!0,placeholder:"请输入杠杆倍数"},null,8,["modelValue"])])),_:1}),o(S,{label:"产品Id:",prop:"ordId"},{default:r((()=>[o(F,{modelValue:H.value.ordId,"onUpdate:modelValue":l[25]||(l[25]=e=>H.value.ordId=e),clearable:!0,placeholder:"请输入产品Id"},null,8,["modelValue"])])),_:1}),o(S,{label:"订单类型:",prop:"ordType"},{default:r((()=>[o(F,{modelValue:H.value.ordType,"onUpdate:modelValue":l[26]||(l[26]=e=>H.value.ordType=e),clearable:!0,placeholder:"请输入订单类型"},null,8,["modelValue"])])),_:1}),o(S,{label:"收益:",prop:"pnl"},{default:r((()=>[o(F,{modelValue:H.value.pnl,"onUpdate:modelValue":l[27]||(l[27]=e=>H.value.pnl=e),clearable:!0,placeholder:"请输入收益"},null,8,["modelValue"])])),_:1}),o(S,{label:"订单方向:",prop:"side"},{default:r((()=>[o(F,{modelValue:H.value.side,"onUpdate:modelValue":l[28]||(l[28]=e=>H.value.side=e),clearable:!0,placeholder:"请输入订单方向"},null,8,["modelValue"])])),_:1}),o(S,{label:"交易模式:",prop:"tdMode"},{default:r((()=>[o(F,{modelValue:H.value.tdMode,"onUpdate:modelValue":l[29]||(l[29]=e=>H.value.tdMode=e),clearable:!0,placeholder:"请输入交易模式"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1},8,["modelValue","title"]),o(Ie,{modelValue:be.value,"onUpdate:modelValue":l[31]||(l[31]=e=>be.value=e),style:{width:"800px"},"lock-scroll":"","before-close":Ve,title:"查看详情","destroy-on-close":""},{default:r((()=>[o(De,{height:"550px"},{default:r((()=>[o(je,{column:"1",border:""},{default:r((()=>[o(ke,{label:"用户apikey"},{default:r((()=>[i(m(H.value.apikey),1)])),_:1}),o(ke,{label:"产品类型"},{default:r((()=>[i(m(H.value.instId),1)])),_:1}),o(ke,{label:"产品Id"},{default:r((()=>[i(m(H.value.ordId),1)])),_:1}),o(ke,{label:"买单id"},{default:r((()=>[i(m(H.value.buyId),1)])),_:1}),o(ke,{label:"委托数量"},{default:r((()=>[i(m(H.value.sz),1)])),_:1}),o(ke,{label:"累计成交量"},{default:r((()=>[i(m(H.value.accFillSz),1)])),_:1}),o(ke,{label:"收益"},{default:r((()=>[i(m(H.value.pnl),1)])),_:1}),o(ke,{label:"成交均价"},{default:r((()=>[i(m(H.value.avgPx),1)])),_:1}),o(ke,{label:"创建订单的时间"},{default:r((()=>[i(m(""!=H.value.ctime?v(N)(H.value.ctime):""),1)])),_:1}),o(ke,{label:"累计手续费"},{default:r((()=>[i(m(H.value.fee),1)])),_:1}),o(ke,{label:"手续费币种"},{default:r((()=>[i(m(H.value.feeCcy),1)])),_:1}),o(ke,{label:"委托单美元价值"},{default:r((()=>[i(m(H.value.notionalUsd),1)])),_:1}),o(ke,{label:"委托单已成交美元价值"},{default:r((()=>[i(m(H.value.fillNotionalUsd),1)])),_:1}),o(ke,{label:"最新成交时间"},{default:r((()=>[i(m(""!=H.value.fillTime?v(N)(Number(H.value.fillTime)):""),1)])),_:1}),o(ke,{label:"产品类型"},{default:r((()=>[i(m(H.value.instType),1)])),_:1}),o(ke,{label:"杠杆倍数"},{default:r((()=>[i(m(H.value.lever),1)])),_:1}),o(ke,{label:"订单类型"},{default:r((()=>[i(m(H.value.ordType),1)])),_:1}),o(ke,{label:"订单方向"},{default:r((()=>[i(m(H.value.side),1)])),_:1}),o(ke,{label:"交易模式"},{default:r((()=>[i(m(H.value.tdMode),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}});export{W as default};
